# 黄金板块交易策略

基于国际金价涨跌的黄金板块股票交易策略，通过分析国际金价走势来指导黄金板块股票的买卖决策。

## 策略说明
```
说明：
我发现国际金价对A股的黄金板块影响较大，我的量化策略如下：
第一步：每天早上8点获取国际金价，假设金价是1000。
第二步：获取国际金价相较于前一天的涨跌幅度，假设上涨1%。
第三步：买入规则：如果第二步获取的金价是上涨，则在早上9:30买入一支黄金板块的股票，买入 10000 * 1%。（说明：
这里的10000是每次买入的设置的基础价格，你需要做成全局变量；这里是1%是金价上涨的幅度。）。如果第
二步获取的金价是下跌，则不买入。
第四步：卖出规则：如果前一天有买入，则第二天就需要卖出。卖出规则定义：假设当前已盈利5%，那么当盈利回调到4%时卖出。（说明：卖出规则需要定义为一个函数）
第五步：设置止损价格为本金的10%。
额外注意：
1、所有魔法值都需要做成全局参数，并且加上对应注释。
2、具体选择哪一只黄金板块的股票，目前先使用 湖南黄金 股票。

```

## 📊 策略逻辑

### 核心思路
- **数据驱动**：根据国际金价的涨跌幅度决定买入金额
- **风险控制**：设置止损和盈利回调机制
- **自动化执行**：支持定时执行和手动操作

### 交易规则

#### 买入规则
1. **触发条件**：国际金价上涨时买入
2. **买入金额**：基础投资金额 × 金价涨跌幅
3. **目标股票**：湖南黄金 (002155)

#### 卖出规则
1. **止损**：亏损达到10%时强制卖出
2. **盈利回调**：当盈利达到5%后，回调到4%时卖出
3. **持仓管理**：前一天买入，第二天考虑卖出

## 🛠️ 文件结构

```
gold/
├── advanced_interactive_system_professional.py # 专业K线图系统
├── web_server.py                 # Web服务器
├── start.py               # 启动脚本
├── requirements.txt              # 依赖包
├── kline_similarity_analyzer              # K线相似度分析器
├── trading_strategy_improved              # 交易策略
└── README.md                    # 说明文档

```

## 详细设计

### 基础信息模块
1. 触发时机：在web页面打开时，立即执行一次
2. 参数设置
   - 选择股票（下拉选择某一只股票）
   - 初始资金（例如初始资金1000元）
   - 分析时间范围（下拉选择，1个月、2个月、3个月、6个月、12个月、24个月）
3. 图表
   - 表格：当前股价、股价涨跌、国际金价、金价涨跌、总成本、总持股数、总资产、今日收益率、累计收益率、年化收益率
   - 图：当前股票的K线图、国际金价的K线图

### 相似度分析模块
1. 触发时机：在web页面中，点击“走势相似度分析”按钮
2. 参数设置
   - correlation: 价格变化相关性 (30%)
   - trend: 趋势方向一致性 (25%) 
   - volatility: 波动性相似度 (20%)
   - pattern: 价格模式匹配 (15%)
   - volume: 成交量关系 (10%)
3. 图表
   - 表格：价格相关性、趋势一致性、波动性相似度、模式匹配、成交量关系
   - 图：根据当前股票K线图和国际金价K线图拟合出来的趋势图（横坐标是每一天，纵坐标是每天的相似度）

### 交易策略执行模块
1. 触发时机：在web页面中，点击“执行策略”
2. 参数设置
   - base_investment: 每次投资的基准金额（每次买入金额 = 基础金额 × 金价涨幅）
   - stop_loss_rate: 止损率（当亏损到总成本的（1-止损率）时卖出）
   - profit_callback_rate: 盈利回调率（从最大盈利率回调到（最大盈利率-盈利回调率）时卖出）
   - max_profit_rate: 最大盈利率（当盈利超过最大盈利率时卖出）
   - min_gold_change: 最小金价涨幅阈值（0.2%，只有金价涨幅超过最小金价涨幅阈值时才买入）
   - min_buy_amount: 最小买入金额（每次买入金额不能小于最小买入金额）
   - transaction_cost_rate: 交易成本率（0.1%，每次买入和卖出时需要扣除交易成本）
   - max_hold_days: 最大持仓天数（超过最大持仓天数时卖出）
3. 图表
   - 表格：每天的交易记录
   - 图：收益率曲线
